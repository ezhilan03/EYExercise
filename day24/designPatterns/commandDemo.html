<html>
	<body>

		<script>
			function main(){
				var hospital = new Hospital();
				var police = new Police();
				var corporation = new Corporation();
				
				var command1 = new DeathCertificateCommand(hospital,police,corporation);
				var eseva = new Eseva();
				eseva.init();
				eseva.setCommand(command1,0);
				eseva.executeCommand(0);
			}
			
			function Eseva(){
				var commands=[];
				this.init = function(){
					for(var i=0;i<5;i++) 
						{ 
						 commands[i]=new Command(); 
						} 
				}
				this.setCommand = function(com,i){
					commands[i]=com;
				}
				this.executeCommand = function(i){
					commands[i].execute();
				}
			}
			
			function Command(){
				this.execute=function(){ 
					 return 'I am dummy I am yet to be initialized....' //this should be overridden
					 }
			}
			
			function DeathCertificateCommand(hospital,police,corporation){
				var str="The workflow for death certificate started..."; 
				 this.execute=function(){ 
				 str=str+".."+hospital.doPostMortem(); 
				 str=str+".."+police.doInvestigation(); 
				 str=str+".."+corporation.doGiveCertificate(); 
				 console.log(str); 
				 } 
			}
			
			function Corporation() { 
				 this.doGiveCertificate=function(){return 'take death certificate...';}
				} 
			function Hospital() { 
				 this.doPostMortem=function(){return 'doing postmortem.....';} 
				 } 
			function Police() { 
				this.doInvestigation=function(){return 'police doing investigation';} 
				}
			
		
				
			DeathCertificateCommand.prototype=new Command(); 
			DeathCertificateCommand.prototype.constructor = DeathCertificateCommand;
			
			
			main();
		</script>

	</body>	
</html>